<div class="container" *ngIf="patientData">
  <h3 class="title text-center">登録内容修正</h3>
  <div class="row" *ngIf="patientData">
    <div class="col-md-6 mr-auto ml-auto">
      <div class="card card-register">
        <form
          class="register-form"
          #updatePatientForm="ngForm"
          (ngSubmit)="updateUser(updatePatientForm)"
        >
          <div class="form-group">
            <label>氏名 <span class="icon-danger">*</span></label>
            <input
              [(ngModel)]="patientData.username"
              name="username"
              type="text"
              class="form-control border-input"
              required
            />
          </div>

          <div class="form-group">
            <label>メールアドレス <span class="icon-danger">*</span></label>
            <input
              [(ngModel)]="patientData.email"
              name="email"
              type="email"
              id="email"
              class="form-control"
              required
            />
          </div>

          <div class="form-group">
            <label>生年月日 <span class="icon-danger">*</span></label>
            <div class="input-group date">
              <input
                [(ngModel)]="patientData.birthday"
                name="birthday"
                [readonly]="true"
                [owlDateTime]="dt1"
                [owlDateTimeTrigger]="dt1"
                [max]="max"
                class="form-control"
                placeholder="生年月日を選択"
                required
              />
              <owl-date-time [pickerType]="'calendar'" #dt1></owl-date-time>

              <div class="input-group-append">
                <span class="glyphicon glyphicon-calendar input-group-text">
                  <i class="fa fa-calendar" aria-hidden="true"></i>
                </span>
              </div>
            </div>
          </div>

          <div class="form-group">
            <label>性別 <span class="icon-danger">*</span></label>
            <select
              class="custom-select"
              [(ngModel)]="patientData.gender"
              name="gender"
              required
            >
              <option [value]="undefined" disabled>
                性別を選択してください
              </option>
              <option
                *ngFor="let dropdownGenderList of dropdownGenderLists"
                [value]="dropdownGenderList.gender"
              >
                {{ dropdownGenderList.gender }}
              </option>
            </select>
          </div>

          <div class="form-group">
            <label>電話番号 <span class="icon-danger">*</span></label>
            <input
              [(ngModel)]="patientData.phoneNumber"
              name="phoneNumber"
              type="text"
              class="form-control border-input"
              placeholder="08012341234"
              required
            />
          </div>

          <div class="form-group">
            <label>住所 <span class="icon-danger">*</span></label>
            <input
              [(ngModel)]="patientData.address"
              name="address"
              type="text"
              class="form-control border-input"
              placeholder="東京都〇〇区〇〇1-1-1"
              required
            />
          </div>

          <div class="form-group">
            <label
              >新型コロナウイルスワクチンは接種しましたか？
              <span class="icon-danger">*</span></label
            >
            <select
              class="custom-select"
              [(ngModel)]="patientData.covid"
              name="covid"
              required
            >
              <option [value]="undefined" disabled>
                回答を選択してください
              </option>
              <option
                *ngFor="let dropdownAnswerList of dropdownAnswerLists"
                [value]="dropdownAnswerList.answer"
              >
                {{ dropdownAnswerList.answer }}
              </option>
            </select>
          </div>

          <div class="form-group">
            <label
              >今回来院された目的はなんですか？
              <span class="icon-danger">*</span></label
            >
            <select
              class="custom-select"
              [(ngModel)]="patientData.purpose"
              name="purpose"
              required
            >
              <option [value]="undefined" disabled>
                回答を選択してください
              </option>
              <option
                *ngFor="let dropdownPurposeList of dropdownPurposeLists"
                [value]="dropdownPurposeList.purpose"
              >
                {{ dropdownPurposeList.purpose }}
              </option>
            </select>
          </div>

          <ng-container *ngIf="patientData.purpose === 'その他'">
            <div class="form-group">
              <label
                >【その他を選択された方】来院目的の詳細を入力してください</label
              >
              <input
                [(ngModel)]="patientData.purposeDetail"
                name="purposeDetail"
                type="text"
                class="form-control border-input"
                placeholder="来院目的を入力してください"
              />
            </div>
          </ng-container>

          <div class="form-group">
            <label
              >抜歯の経験はありますか？
              <span class="icon-danger">*</span></label
            >
            <select
              class="custom-select"
              [(ngModel)]="patientData.toothExtraction"
              name="toothExtraction"
              required
            >
              <option [value]="undefined" disabled>
                回答を選択してください
              </option>
              <option
                *ngFor="let dropdownAnswerList of dropdownAnswerLists"
                [value]="dropdownAnswerList.answer"
              >
                {{ dropdownAnswerList.answer }}
              </option>
            </select>
          </div>

          <ng-container *ngIf="patientData.toothExtraction === 'はい'">
            <div class="form-group">
              <label>どのくらい前に抜歯しましたか？</label>
              <input
                [(ngModel)]="patientData.whenDidYouExtractTooth"
                name="whenDidYouExtractTooth"
                type="text"
                class="form-control border-input"
                placeholder="3年前"
              />
              <label>その時に何か異常はありましたか？　</label>
              <div class="form-check">
                <label class="form-check-label">
                  <input
                    class="form-check-input"
                    [(ngModel)]="patientData.BleedingDidntStop"
                    name="BleedingDidntStop"
                    type="checkbox"
                  />
                  血が止まらなかった
                  <span class="form-check-sign"></span>
                </label>
              </div>
              <div class="form-check">
                <label class="form-check-label">
                  <input
                    class="form-check-input"
                    [(ngModel)]="patientData.HadPainForDays"
                    name="HadPainForDays"
                    type="checkbox"
                  />
                  何日も痛んだ
                  <span class="form-check-sign"></span>
                </label>
              </div>
              <div class="form-check">
                <label class="form-check-label">
                  <input
                    class="form-check-input"
                    [(ngModel)]="patientData.HadFever"
                    name="HadFever"
                    type="checkbox"
                  />
                  熱が出た
                  <span class="form-check-sign"></span>
                </label>
              </div>
              <div class="form-check">
                <label class="form-check-label">
                  <input
                    class="form-check-input"
                    [(ngModel)]="patientData.HadAnemia"
                    name="HadAnemia"
                    type="checkbox"
                  />
                  貧血を起こした
                  <span class="form-check-sign"></span>
                </label>
              </div>
              <label>上記以外の異常はありましたか？　</label>
              <input
                [(ngModel)]="patientData.OtherTroubleAfterToothExtraction"
                name="OtherTroubleAfterToothExtraction"
                type="text"
                class="form-control border-input"
                placeholder="上記以外の症状があれば入力してください"
              />
            </div>
          </ng-container>

          <div class="form-group">
            <label
              >薬を飲んで副作用はありませんか？
              <span class="icon-danger">*</span></label
            >
            <select
              class="custom-select"
              [(ngModel)]="patientData.sideEffect"
              name="sideEffect"
              required
            >
              <option [value]="undefined" disabled>
                回答を選択してください
              </option>
              <option
                *ngFor="let dropdownAnswerList of dropdownAnswerLists"
                [value]="dropdownAnswerList.answer"
              >
                {{ dropdownAnswerList.answer }}
              </option>
            </select>
          </div>

          <ng-container *ngIf="patientData.sideEffect === 'はい'">
            <div class="form-group">
              <label>その時の症状を選択してください</label>
              <div class="form-check">
                <label class="form-check-label">
                  <input
                    class="form-check-input"
                    [(ngModel)]="patientData.GetStomach"
                    name="GetStomach"
                    type="checkbox"
                  />
                  胃が痛くなる
                  <span class="form-check-sign"></span>
                </label>
              </div>
              <div class="form-check">
                <label class="form-check-label">
                  <input
                    class="form-check-input"
                    [(ngModel)]="patientData.GetRash"
                    name="GetRash"
                    type="checkbox"
                  />
                  発作が出る
                  <span class="form-check-sign"></span>
                </label>
              </div>
              <div class="form-check">
                <label class="form-check-label">
                  <input
                    class="form-check-input"
                    [(ngModel)]="patientData.GetItchy"
                    name="GetItchy"
                    type="checkbox"
                  />
                  痒くなる
                  <span class="form-check-sign"></span>
                </label>
              </div>
              <label>上記以外の副作用はありましたか？　</label>
              <input
                [(ngModel)]="patientData.purposeDetail"
                name="purposeDetail"
                type="text"
                class="form-control border-input"
                placeholder="上記以外の副作用があれば入力してください"
              />
            </div>
          </ng-container>

          <div class="form-group">
            <label
              >特異体質やアレルギーはありませんか？
              <span class="icon-danger">*</span></label
            >
            <select
              class="custom-select"
              [(ngModel)]="patientData.allergic"
              name="allergic"
              required
            >
              <option [value]="undefined" disabled>
                回答を選択してください
              </option>
              <option
                *ngFor="let dropdownAnswerList of dropdownAnswerLists"
                [value]="dropdownAnswerList.answer"
              >
                {{ dropdownAnswerList.answer }}
              </option>
            </select>
          </div>

          <ng-container *ngIf="patientData.allergic === 'はい'">
            <div class="form-group">
              <label>その時の症状を選択してください</label>
              <div class="form-check">
                <label class="form-check-label">
                  <input
                    class="form-check-input"
                    [(ngModel)]="patientData.HaveRashEasily"
                    name="HaveRashEasily"
                    type="checkbox"
                  />
                  かぶれやすい
                  <span class="form-check-sign"></span>
                </label>
              </div>
              <div class="form-check">
                <label class="form-check-label">
                  <input
                    class="form-check-input"
                    [(ngModel)]="patientData.HaveUrticaria"
                    name="HaveUrticaria"
                    type="checkbox"
                  />
                  蕁麻疹がある
                  <span class="form-check-sign"></span>
                </label>
              </div>
              <div class="form-check">
                <label class="form-check-label">
                  <input
                    class="form-check-input"
                    [(ngModel)]="patientData.HaveAsthma"
                    name="HaveAsthma"
                    type="checkbox"
                  />
                  喘息がある
                  <span class="form-check-sign"></span>
                </label>
              </div>
              <label>上記以外の副作用はありましたか？　</label>
              <input
                [(ngModel)]="patientData.OtherAllergic"
                name="OtherAllergic"
                type="text"
                class="form-control border-input"
                placeholder="上記以外の副作用があれば入力してください"
              />
            </div>
          </ng-container>

          <div class="form-group">
            <label
              >内科的な病気はありませんか？
              <span class="icon-danger">*</span></label
            >
            <select
              class="custom-select"
              [(ngModel)]="patientData.medicalIllness"
              name="medicalIllness"
              required
            >
              <option [value]="undefined" disabled>
                回答を選択してください
              </option>
              <option
                *ngFor="let dropdownAnswerList of dropdownAnswerLists"
                [value]="dropdownAnswerList.answer"
              >
                {{ dropdownAnswerList.answer }}
              </option>
            </select>
          </div>

          <ng-container *ngIf="patientData.medicalIllness === 'はい'">
            <div class="form-group">
              <label>該当するものを選択してください</label>
              <div class="form-check">
                <label class="form-check-label">
                  <input
                    class="form-check-input"
                    [(ngModel)]="patientData.Heart"
                    name="Heart"
                    type="checkbox"
                  />
                  心臓
                  <span class="form-check-sign"></span>
                </label>
              </div>
              <div class="form-check">
                <label class="form-check-label">
                  <input
                    class="form-check-input"
                    [(ngModel)]="patientData.Liver"
                    name="Liver"
                    type="checkbox"
                  />
                  肝臓(肝炎)
                  <span class="form-check-sign"></span>
                </label>
              </div>
              <div class="form-check">
                <label class="form-check-label">
                  <input
                    class="form-check-input"
                    [(ngModel)]="patientData.Kidney"
                    name="Kidney"
                    type="checkbox"
                  />
                  腎臓
                  <span class="form-check-sign"></span>
                </label>
              </div>
              <div class="form-check">
                <label class="form-check-label">
                  <input
                    class="form-check-input"
                    [(ngModel)]="patientData.Hemophilia"
                    name="Hemophilia"
                    type="checkbox"
                  />
                  血友病
                  <span class="form-check-sign"></span>
                </label>
              </div>
              <div class="form-check">
                <label class="form-check-label">
                  <input
                    class="form-check-input"
                    [(ngModel)]="patientData.Diabetes"
                    name="Diabetes"
                    type="checkbox"
                  />
                  糖尿
                  <span class="form-check-sign"></span>
                </label>
              </div>
              <div class="form-check">
                <label class="form-check-label">
                  <input
                    class="form-check-input"
                    [(ngModel)]="patientData.HighBloodPressure"
                    name="HighBloodPressure"
                    type="checkbox"
                  />
                  高血圧
                  <span class="form-check-sign"></span>
                </label>
              </div>
              <div class="form-check">
                <label class="form-check-label">
                  <input
                    class="form-check-input"
                    [(ngModel)]="patientData.LowBloodPressure"
                    name="LowBloodPressure"
                    type="checkbox"
                  />
                  低血圧
                  <span class="form-check-sign"></span>
                </label>
              </div>
              <div class="form-check">
                <label class="form-check-label">
                  <input
                    class="form-check-input"
                    [(ngModel)]="patientData.Asthma"
                    name="Asthma"
                    type="checkbox"
                  />
                  喘息
                  <span class="form-check-sign"></span>
                </label>
              </div>
              <div class="form-check">
                <label class="form-check-label">
                  <input
                    class="form-check-input"
                    [(ngModel)]="patientData.Tuberculosis"
                    name="Tuberculosis"
                    type="checkbox"
                  />
                  結核
                  <span class="form-check-sign"></span>
                </label>
              </div>
              <label>上記以外の症状はありましたか？　</label>
              <input
                [(ngModel)]="patientData.OtherMedicalIllness"
                name="OtherMedicalIllness"
                type="text"
                class="form-control border-input"
                placeholder="上記以外の症状があれば入力してください"
              />
            </div>
          </ng-container>

          <div class="form-group">
            <label
              >1日での歯の清掃回数 <span class="icon-danger">*</span></label
            >
            <select
              class="custom-select"
              [(ngModel)]="patientData.toothCleaningTimes"
              name="toothCleaningTimes"
              required
            >
              <option [value]="undefined" disabled>
                回答を選択してください
              </option>
              <option [value]="1">1回</option>
              <option [value]="2">2回</option>
              <option [value]="3">3回</option>
              <option [value]="4">4回以上</option>
            </select>
          </div>

          <div class="form-group">
            <label>この機会に <span class="icon-danger">*</span></label>
            <select
              class="custom-select"
              [(ngModel)]="patientData.request"
              name="request"
              required
            >
              <option [value]="undefined" disabled>
                回答を選択してください
              </option>
              <option
                *ngFor="let dropdownRequestList of dropdownRequestLists"
                [value]="dropdownRequestList.request"
              >
                {{ dropdownRequestList.request }}
              </option>
            </select>
          </div>

          <div class="form-group">
            <label
              >診療についてのご希望 <span class="icon-danger">*</span></label
            >
            <select
              class="custom-select"
              [(ngModel)]="patientData.medicalInsurance"
              name="medicalInsurance"
              required
            >
              <option [value]="undefined" disabled>
                回答を選択してください
              </option>
              <option
                *ngFor="
                  let dropdownMedicalInsuranceList of dropdownMedicalInsuranceLists
                "
                [value]="dropdownMedicalInsuranceList.medicalInsurance"
              >
                {{ dropdownMedicalInsuranceList.medicalInsurance }}
              </option>
            </select>
          </div>

          <div class="form-group">
            <label>現在の健康状態 <span class="icon-danger">*</span></label>
            <select
              class="custom-select"
              [(ngModel)]="patientData.condition"
              name="condition"
              required
            >
              <option [value]="undefined" disabled>
                回答を選択してください
              </option>
              <option
                *ngFor="let dropdownConditionList of dropdownConditionLists"
                [value]="dropdownConditionList.condition"
              >
                {{ dropdownConditionList.condition }}
              </option>
            </select>
          </div>

          <button
            *ngIf="updatePatientForm.pristine || !updatePatientForm.valid"
            disabled
            type="submit"
            class="btn btn-block btn-round btn-lg"
          >
            更新する
          </button>
          <button
            *ngIf="!updatePatientForm.pristine && updatePatientForm.valid"
            type="submit"
            class="btn btn-primary btn-block btn-round btn-lg"
          >
            更新する
          </button>
        </form>
        <!-- <div class="forgot">
          <button (click)="onResetPassword()" class="btn btn-danger btn-link">
            講師パスワード初期化
          </button>
        </div> -->
        <div class="space-top"></div>
        <div *ngIf="errors && errors.length > 0" class="alert alert-danger">
          <p *ngFor="let error of errors">{{ error.detail }}</p>
        </div>
      </div>
    </div>
  </div>
</div>
